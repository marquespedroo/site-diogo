<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImobiTools - Ferramentas Inteligentes para Corretores Imobili√°rios</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Ferramentas profissionais para corretores imobili√°rios. Calculadoras, simuladores e an√°lises para otimizar suas vendas. Experimente gr√°tis!">
    <link rel="canonical" href="https://imobitools.vercel.app/">

    <!-- Open Graph Tags -->
    <meta property="og:title" content="ImobiTools - Ferramentas Inteligentes para Corretores">
    <meta property="og:description" content="Calculadoras e simuladores profissionais para corretores imobili√°rios. Experimente gr√°tis!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://imobitools.vercel.app/">
    <meta property="og:image" content="https://imobitools.vercel.app/assets/og-image.png">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Roboto:wght@700&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="/src/styles/dashboard.css">

    <style>
        /* Landing Page Specific Styles */
        body {
            background: var(--gray-100);
            padding: 0;
        }

        /* Navbar */
        .landing-navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-md);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            font-family: var(--font-secondary);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
            align-items: center;
            margin: 0;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--primary);
            font-weight: 600;
            transition: color 0.3s;
            font-family: var(--font-primary);
        }

        .nav-links a:hover {
            color: var(--gradient-primary);
        }

        .btn-login {
            background: transparent;
            color: var(--gradient-primary);
            padding: 0.6rem 1.5rem;
            border: 2px solid var(--gradient-primary);
            border-radius: var(--radius-lg);
            text-decoration: none;
            font-weight: 700;
            transition: all 0.3s;
            font-family: var(--font-primary);
        }

        .btn-login:hover {
            background: var(--gradient-primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* Hero Section */
        .hero {
            margin-top: 80px;
            background: linear-gradient(135deg, #677AE5 0%, #764ba2 100%);
            color: white;
            padding: 5rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(255,255,255,0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .hero-content {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            font-weight: 900;
            font-family: var(--font-secondary);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2.5rem;
            opacity: 0.95;
            font-weight: 500;
            line-height: 1.6;
        }

        .hero-buttons {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-hero {
            padding: 1.2rem 2.5rem;
            border-radius: var(--radius-xl);
            text-decoration: none;
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            border: none;
            font-size: 1.1rem;
            font-family: var(--font-primary);
            box-shadow: var(--shadow-lg);
        }

        .btn-hero-primary {
            background: white;
            color: var(--gradient-primary);
        }

        .btn-hero-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(255, 255, 255, 0.4);
        }

        .btn-hero-outline {
            background: transparent;
            color: white;
            border: 3px solid white;
        }

        .btn-hero-outline:hover {
            background: white;
            color: var(--gradient-primary);
            transform: translateY(-3px);
        }

        /* Free Calculator Section */
        .free-calculator-section {
            max-width: 1400px;
            margin: -100px auto 4rem;
            padding: 0 2rem;
            position: relative;
            z-index: 10;
        }

        .usage-tracker {
            background: white;
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .usage-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .usage-count {
            font-size: 2rem;
            font-weight: 900;
            color: var(--gradient-primary);
            font-family: var(--font-secondary);
        }

        .usage-text {
            font-size: 0.95rem;
            color: var(--gray-700);
            line-height: 1.4;
        }

        .usage-limit-warning {
            background: linear-gradient(135deg, #fb6340 0%, #fbb140 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-lg);
            font-weight: 700;
            font-size: 0.9rem;
        }

        /* Usage Limit Modal */
        .usage-limit-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .usage-limit-modal.show {
            display: flex;
        }

        .modal-content-limit {
            background: white;
            border-radius: var(--radius-xl);
            max-width: 500px;
            width: 100%;
            padding: 3rem;
            text-align: center;
            box-shadow: var(--shadow-lg);
        }

        .modal-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .modal-content-limit h2 {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 1rem;
            font-family: var(--font-secondary);
        }

        .modal-content-limit p {
            color: var(--gray-700);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        /* Products Section */
        .products-section {
            max-width: 1200px;
            margin: 4rem auto;
            padding: 0 2rem;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--primary);
            margin-bottom: 1rem;
            font-family: var(--font-secondary);
        }

        .section-subtitle {
            text-align: center;
            font-size: 1.2rem;
            color: var(--gray-600);
            margin-bottom: 3rem;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 4rem;
        }

        .product-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: 2.5rem;
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .product-icon {
            width: 70px;
            height: 70px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-sm);
        }

        .product-card h3 {
            font-size: 1.75rem;
            margin-bottom: 1rem;
            color: var(--primary);
            font-family: var(--font-secondary);
        }

        .product-card p {
            color: var(--gray-600);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .product-features {
            list-style: none;
            margin-bottom: 2rem;
        }

        .product-features li {
            padding: 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: var(--gray-700);
        }

        .product-features li::before {
            content: "‚úì";
            color: var(--success);
            font-weight: 900;
            font-size: 1.2rem;
        }

        .btn-product {
            width: 100%;
            padding: 1rem;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            color: white;
            background: linear-gradient(135deg, var(--gradient-primary), var(--secondary));
            font-family: var(--font-primary);
        }

        .btn-product:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* Footer */
        .footer {
            background: var(--primary);
            color: white;
            padding: 3rem 2rem 1.5rem;
            margin-top: 4rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            margin-bottom: 2rem;
        }

        .footer-section h4 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            font-family: var(--font-secondary);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.75rem;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: white;
        }

        .footer-bottom {
            max-width: 1200px;
            margin: 0 auto;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .nav-links {
                display: none;
            }

            .free-calculator-section {
                margin-top: 2rem;
            }

            .usage-tracker {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="landing-navbar">
        <div class="nav-container">
            <a href="/" class="logo">
                <svg class="logo-icon" width="40" height="40" viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="15" fill="url(#argon-gradient)"/>
                    <rect x="7" y="8" width="4" height="12" rx="1" fill="white" opacity="0.9"/>
                    <rect x="13" y="10" width="4" height="10" rx="1" fill="white" opacity="0.8"/>
                    <rect x="19" y="6" width="4" height="14" rx="1" fill="white"/>
                    <defs>
                        <linearGradient id="argon-gradient" x1="0" y1="0" x2="32" y2="32">
                            <stop offset="0%" stop-color="#667eea"/>
                            <stop offset="100%" stop-color="#764ba2"/>
                        </linearGradient>
                    </defs>
                </svg>
                <span class="logo-text">ImobiTools</span>
            </a>

            <ul class="nav-links">
                <li><a href="#calculadora">Calculadora Gr√°tis</a></li>
                <li><a href="#ferramentas">Ferramentas</a></li>
                <li><a href="#planos">Planos</a></li>
            </ul>

            <a href="/login.html" class="btn-login">Entrar</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Ferramentas Profissionais para Corretores de Im√≥veis</h1>
            <p>Automatize c√°lculos, simule financiamentos e impressione seus clientes com an√°lises precisas em segundos.</p>
            <div class="hero-buttons">
                <a href="#calculadora" class="btn-hero btn-hero-primary">
                    <span>üßÆ</span>
                    Experimentar Gr√°tis
                </a>
                <a href="/login.html" class="btn-hero btn-hero-outline">
                    Criar Conta
                </a>
            </div>
        </div>
    </section>

    <!-- Free Calculator Section -->
    <section class="free-calculator-section" id="calculadora">
        <!-- Usage Tracker -->
        <div class="usage-tracker" id="usageTracker">
            <div class="usage-info">
                <div class="usage-count" id="usageCount">3</div>
                <div class="usage-text">
                    <strong>usos restantes</strong><br>
                    Pr√≥xima renova√ß√£o em <span id="resetDate">15 dias</span>
                </div>
            </div>
            <div class="usage-limit-warning" style="display: none;" id="limitWarning">
                ‚ö†Ô∏è √öltima utiliza√ß√£o gratuita!
            </div>
        </div>

        <!-- Calculator Card -->
        <div class="card chart-card">
                <div class="card-header">
                    <h3>Novo C√°lculo de Im√≥vel</h3>
                    <p class="chart-subtitle">
                        <span class="trend-period">Calcule o status de aprova√ß√£o do financiamento do im√≥vel</span>
                    </p>
                </div>
                <div class="calculator-form">
                    <form id="calculatorForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="propertyValue">Valor do Im√≥vel (R$)</label>
                                <input type="number" id="propertyValue" name="propertyValue" placeholder="500000" min="0" step="1000" required>
                            </div>
                            <div class="form-group">
                                <label for="captationPercentage">Porcentagem de Capta√ß√£o (%)</label>
                                <input type="number" id="captationPercentage" name="captationPercentage" placeholder="30" min="0" max="100" step="0.1" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="completionMonth">M√™s de Entrega</label>
                                <select id="completionMonth" name="completionMonth" required>
                                    <option value="">Selecione o m√™s</option>
                                    <option value="1">Janeiro</option>
                                    <option value="2">Fevereiro</option>
                                    <option value="3">Mar√ßo</option>
                                    <option value="4">Abril</option>
                                    <option value="5">Maio</option>
                                    <option value="6">Junho</option>
                                    <option value="7">Julho</option>
                                    <option value="8">Agosto</option>
                                    <option value="9">Setembro</option>
                                    <option value="10">Outubro</option>
                                    <option value="11">Novembro</option>
                                    <option value="12">Dezembro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="completionYear">Ano de Entrega</label>
                                <input type="number" id="completionYear" name="completionYear" placeholder="2025" min="2024" max="2100" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="habiteSe">Valor do Habite-se (R$)</label>
                            <input type="number" id="habiteSe" name="habiteSe" placeholder="0" min="0" step="100" required>
                        </div>

                        <div class="payment-phases-section">
                            <h4>Fases de Pagamento</h4>
                            <p class="section-subtitle">Adicione parcelas para cada fase de pagamento</p>

                            <div class="phase-tabs">
                                <button type="button" class="phase-tab active" data-phase="entry">Entrada</button>
                                <button type="button" class="phase-tab" data-phase="during">Durante Obra</button>
                                <button type="button" class="phase-tab" data-phase="post">P√≥s-Obra</button>
                            </div>

                            <div class="phase-content active" id="entryPhase">
                                <div class="installments-list" id="entryInstallments"></div>
                                <button type="button" class="btn-add-installment" data-phase="entry">+ Adicionar Parcela de Entrada</button>
                            </div>

                            <div class="phase-content" id="duringPhase">
                                <div class="installments-list" id="duringInstallments"></div>
                                <button type="button" class="btn-add-installment" data-phase="during">+ Adicionar Parcela Durante Obra</button>
                            </div>

                            <div class="phase-content" id="postPhase">
                                <div class="installments-list" id="postInstallments"></div>
                                <button type="button" class="btn-add-installment" data-phase="post">+ Adicionar Parcela P√≥s-Obra</button>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn-primary-form">Calcular e Salvar</button>
                            <button type="button" class="btn-secondary-form" id="btnReset">Limpar Formul√°rio</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Approval Status Display -->
            <div class="card gradient-card" id="approvalStatusCard">
                <div class="gradient-content">
                    <div class="gradient-icon">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="white" id="statusIcon">
                            <circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="3" fill="none"/>
                            <path d="M20 32l8 8 16-16" stroke="currentColor" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h3 class="gradient-title" id="statusTitle">Aguardando C√°lculo</h3>
                    <p class="gradient-description" id="statusDescription">Preencha o formul√°rio e clique em "Calcular e Salvar" para ver o status de aprova√ß√£o do financiamento do seu im√≥vel.</p>
                    <div id="statusDetails" class="status-details hidden">
                        <div class="status-metric">
                            <span class="metric-label">Capta√ß√£o Necess√°ria</span>
                            <span class="metric-value" id="requiredCaptation">R$ 0</span>
                        </div>
                        <div class="status-metric">
                            <span class="metric-label">Capta√ß√£o Real</span>
                            <span class="metric-value" id="actualCaptation">R$ 0</span>
                        </div>
                        <div class="status-metric">
                            <span class="metric-label">Diferen√ßa</span>
                            <span class="metric-value" id="difference">R$ 0</span>
                        </div>
                        <div class="status-metric">
                            <span class="metric-label">Porcentagem Paga</span>
                            <span class="metric-value" id="percentagePaid">0%</span>
                        </div>
                    </div>
                    <button class="btn-share hidden" id="btnShare">Gerar Link Compartilh√°vel</button>
                </div>
            </div>
    </section>

    <!-- Products Section -->
    <section class="products-section" id="ferramentas">
        <h2 class="section-title">Todas as Ferramentas Profissionais</h2>
        <p class="section-subtitle">Acesse ferramentas exclusivas e otimize seu trabalho com assinatura premium</p>

        <div class="products-grid">
            <!-- Cash Flow Calculator -->
            <div class="product-card">
                <div class="product-icon" style="background: linear-gradient(135deg, #10b981, #059669);">üí∞</div>
                <h3>Calculadora de Fluxo</h3>
                <p>Planeje pagamentos de entrada, durante obra e p√≥s-obra com precis√£o total.</p>
                <ul class="product-features">
                    <li>4 fases de pagamento</li>
                    <li>Simula√ß√£o PRICE e SAC</li>
                    <li>An√°lise de aprova√ß√£o</li>
                    <li>Relat√≥rios detalhados</li>
                </ul>
                <button class="btn-product" data-redirect="/login.html">Assinar para Acessar</button>
            </div>

            <!-- Financing Simulator -->
            <div class="product-card">
                <div class="product-icon" style="background: linear-gradient(135deg, #3b82f6, #2563eb);">üè¶</div>
                <h3>Simulador de Financiamento</h3>
                <p>Calcule capacidade de compra e simule financiamentos residenciais, comerciais e rurais.</p>
                <ul class="product-features">
                    <li>3 tipos de im√≥veis</li>
                    <li>Tabelas PRICE e SAC</li>
                    <li>Valida√ß√£o de idade</li>
                    <li>Limite de prazo autom√°tico</li>
                </ul>
                <button class="btn-product" data-redirect="/login.html">Assinar para Acessar</button>
            </div>

            <!-- Market Study -->
            <div class="product-card">
                <div class="product-icon" style="background: linear-gradient(135deg, #f97316, #ea580c);">üìä</div>
                <h3>Estudo de Mercado</h3>
                <p>Avalie im√≥veis comparando com amostras similares conforme NBR 14653-2.</p>
                <ul class="product-features">
                    <li>An√°lise comparativa</li>
                    <li>Conformidade NBR 14653-2</li>
                    <li>Relat√≥rios profissionais</li>
                    <li>M√∫ltiplas amostras</li>
                </ul>
                <button class="btn-product" data-redirect="/login.html">Assinar para Acessar</button>
            </div>

            <!-- Projects Table -->
            <div class="product-card">
                <div class="product-icon" style="background: linear-gradient(135deg, #a855f7, #9333ea);">üìã</div>
                <h3>Tabela de Empreendimentos</h3>
                <p>Gerencie e compare m√∫ltiplos empreendimentos em uma √∫nica visualiza√ß√£o.</p>
                <ul class="product-features">
                    <li>Gest√£o centralizada</li>
                    <li>Compara√ß√£o de projetos</li>
                    <li>Filtros avan√ßados</li>
                    <li>Exporta√ß√£o de dados</li>
                </ul>
                <button class="btn-product" data-redirect="/login.html">Assinar para Acessar</button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>ImobiTools</h4>
                <p style="color: rgba(255,255,255,0.8); line-height: 1.6;">
                    Ferramentas profissionais para corretores imobili√°rios que buscam excel√™ncia e efici√™ncia.
                </p>
            </div>

            <div class="footer-section">
                <h4>Ferramentas</h4>
                <ul class="footer-links">
                    <li><a href="#calculadora">Calculadora de Im√≥veis</a></li>
                    <li><a href="/login.html">Calculadora de Fluxo</a></li>
                    <li><a href="/login.html">Simulador de Financiamento</a></li>
                    <li><a href="/login.html">Estudo de Mercado</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Empresa</h4>
                <ul class="footer-links">
                    <li><a href="#ferramentas">Sobre</a></li>
                    <li><a href="#planos">Planos</a></li>
                    <li><a href="/login.html">Entrar</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 ImobiTools. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- Usage Limit Modal -->
    <div class="usage-limit-modal" id="usageLimitModal">
        <div class="modal-content-limit">
            <div class="modal-icon">üö´</div>
            <h2>Limite Atingido!</h2>
            <p>Voc√™ utilizou suas 3 calculadoras gratuitas deste per√≠odo.</p>
            <p><strong>Crie uma conta para acesso ilimitado!</strong></p>
            <a href="/login.html" class="btn-hero btn-hero-primary" style="display: inline-flex;">
                Criar Conta Gr√°tis
            </a>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/src/scripts/shared-utils.js"></script>
    <script src="/src/scripts/dashboard.js"></script>

    <script>
        // Usage Tracking Logic (3 uses per 15 days)
        const STORAGE_KEY = 'imobitools_usage';
        const MAX_USES = 3;
        const RESET_DAYS = 15;

        function initUsageTracking() {
            let usage = getUsageData();

            // Check if needs reset
            const now = new Date();
            const resetDate = new Date(usage.resetDate);

            if (now >= resetDate) {
                // Reset usage
                usage = {
                    count: MAX_USES,
                    firstUse: now.toISOString(),
                    resetDate: new Date(now.getTime() + RESET_DAYS * 24 * 60 * 60 * 1000).toISOString()
                };
                saveUsageData(usage);
            }

            updateUsageUI(usage);
        }

        function getUsageData() {
            const stored = localStorage.getItem(STORAGE_KEY);
            if (stored) {
                return JSON.parse(stored);
            }

            // Initialize new user
            const now = new Date();
            return {
                count: MAX_USES,
                firstUse: now.toISOString(),
                resetDate: new Date(now.getTime() + RESET_DAYS * 24 * 60 * 60 * 1000).toISOString()
            };
        }

        function saveUsageData(usage) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(usage));
        }

        function updateUsageUI(usage) {
            const countEl = document.getElementById('usageCount');
            const resetEl = document.getElementById('resetDate');
            const warningEl = document.getElementById('limitWarning');

            if (countEl) countEl.textContent = usage.count;

            if (resetEl) {
                const resetDate = new Date(usage.resetDate);
                const daysLeft = Math.ceil((resetDate - new Date()) / (1000 * 60 * 60 * 24));
                resetEl.textContent = daysLeft > 1 ? `${daysLeft} dias` : 'amanh√£';
            }

            if (warningEl) {
                warningEl.style.display = usage.count === 1 ? 'block' : 'none';
            }
        }

        function decrementUsage() {
            let usage = getUsageData();

            if (usage.count <= 0) {
                showUsageLimitModal();
                return false;
            }

            usage.count--;
            saveUsageData(usage);
            updateUsageUI(usage);

            if (usage.count === 0) {
                setTimeout(() => showUsageLimitModal(), 500);
            }

            return true;
        }

        function showUsageLimitModal() {
            const modal = document.getElementById('usageLimitModal');
            if (modal) {
                modal.classList.add('show');

                // Disable calculator
                const form = document.getElementById('calculatorForm');
                if (form) {
                    const inputs = form.querySelectorAll('input, select, button');
                    inputs.forEach(input => input.disabled = true);
                }
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initUsageTracking();

            // Intercept calculator form submission
            const form = document.getElementById('calculatorForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    const usage = getUsageData();
                    if (usage.count <= 0) {
                        e.preventDefault();
                        showUsageLimitModal();
                        return false;
                    }

                    // Decrement on successful calculation
                    decrementUsage();
                });
            }

            // Close modal on click outside
            const modal = document.getElementById('usageLimitModal');
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.classList.remove('show');
                    }
                });
            }
        });

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Product redirect buttons (replace onclick attributes)
        document.querySelectorAll('[data-redirect]').forEach(button => {
            button.addEventListener('click', function() {
                window.location.href = this.getAttribute('data-redirect');
            });
        });
    </script>
</body>
</html>